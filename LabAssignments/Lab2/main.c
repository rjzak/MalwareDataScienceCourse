#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>
#include <time.h>

float absf(float a);

int main(const int argc, const char* argv[]) {
    unsigned long n = 100, z = 0, inside = 0;
    float x, y, rootxy, calculatedpi;
    const float pi = 3.1415926535879323846;
    srand(time(0));
    if (argc > 1) {
        n = atol(argv[1]);
        if (n > 100) printf("n = %ld\n", n);
        else n = 100;
    }

    while (z < n) {
        x = rand()/(float)RAND_MAX;
        y = rand()/(float)RAND_MAX;
        rootxy = sqrt(pow(x,2) + (pow(y,2)));
        if (rootxy <= 1.0)
            inside++;
        z++;
    }
    calculatedpi = 4.0*(float)inside/(float)n;
    printf("%f with error %f after %ld iterations\n", calculatedpi, absf(calculatedpi-pi), n);
    
    if (argc > 2 && strcmp(argv[2], "UMBC")==0) printf("Malware is fun!\n");
    return EXIT_SUCCESS;
}

float absf(float a) {
    if (a < 0.000000) return -a;
    return a;
}
