#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>
#include <time.h>

float absf(float a);

int main(const int argc, const char* argv[]) {
    unsigned long n = 100, z = 0, inside = 0;
    float x, y, rootxy, calculatedpi;
    const float pi = 3.1415926535879323846;
    srand(time(0));
    #ifdef ASSIGNMENT
    if (argc > 1) {
        n = atol(argv[1]);
        if (n > 100) printf("n = %ld\n", n);
        else n = 100;
    }
    #endif

    while (z < n) {
        x = rand()/(float)RAND_MAX;
        y = rand()/(float)RAND_MAX;
        rootxy = sqrt(pow(x,2) + (pow(y,2)));
        if (rootxy <= 1.0)
            inside++;
        z++;
    }
    calculatedpi = 4.0*(float)inside/(float)n;
    printf("%f with error %f after %ld iterations\n", calculatedpi, absf(calculatedpi-pi), n);
    
    #ifdef ASSIGNMENT
    if (argc > 2) {
        int i;
        int u[4] = {185, 177, 166, 167};
        char tmp[4];
        for(i = 0; i < 4; i++) {
            tmp[i] = u[i]-100;
        }
        if (strcmp(argv[2], tmp) == 0) {
            int p[16] = {-23, -3, 8, 19, -3, 14, 1, -68, 5, 15, -68, 2, 17, 10, -67, -90}; // Malware is fun!
            int i;
            for(i = 0; i < 16; i++) {
                printf("%c", p[i]+100);
            }
        }
    }
    #endif
    
    return EXIT_SUCCESS;
}

float absf(float a) {
    if (a < 0.000000) return -a;
    return a;
}
